<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.1" />
<title>portfolio_app.routes API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>portfolio_app.routes</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">from flask import render_template, request, redirect, url_for
from portfolio_app import app
from logging.config import fileConfig
import daniel_api as jen_api
import os

current_path = os.path.dirname(__name__)
data_path = os.path.relpath(&#39;data.json&#39;, current_path)
db = jen_api.load(data_path)

fileConfig(&#39;logging.cfg&#39;)
# /
@app.route(&#39;/&#39;)
@app.route(&#39;/home&#39;)
@app.route(&#39;/home/&#39;)
def home():
    &#34;&#34;&#34;Homepage. Contains info on author.&#34;&#34;&#34;
    if request.args.get(&#34;search projects&#34;, &#34;&#34;):
        return redirect(url_for(&#34;list&#34;))
    else:
        user = {&#39;username&#39;: &#39;jenoh242 &amp; danhu849&#39;}
        return render_template(&#39;index.html&#39;, user=user)

# /list
@app.route(&#39;/list&#39;)
@app.route(&#39;/list/&#39;)
def list():
    &#34;&#34;&#34;List of projects, with advanced search.&#34;&#34;&#34;
    search_for = request.args.get(&#34;search projects&#34;, &#34;&#34;)
    search_fields = request.args.getlist(&#34;search_field&#34;)
    if not search_fields:
        search_fields = None
    sort_by = request.args.get(&#34;sort_by&#34;, &#34;&#34;)
    if not sort_by:
        sort_by = &#34;start_date&#34;
    sort_order = request.args.get(&#34;sort_order&#34;, &#34;&#34;)
    if not sort_order:
        sort_order = &#34;desc&#34;
    found = jen_api.search(db, search=search_for, sort_by=sort_by,
                           sort_order=sort_order, search_fields=search_fields)
    #print(&#34;This is found: &#34;, found)
    return render_template(&#39;list.html&#39;, title=&#39;Search&#39;, search=search_for, search_results=found, search_fields=jen_api.get_search_fields(db), searched_search_fields=search_fields)


# /project/id
@app.route(&#39;/project/&lt;int:id&gt;&#39;, methods=[&#39;GET&#39;])
@app.route(&#39;/project/&lt;int:id&gt;/&#39;, methods=[&#39;GET&#39;])
def show_project(id):
    &#34;&#34;&#34;Projectpage. Shows info on project.&#34;&#34;&#34;
    if request.args.get(&#34;search projects&#34;, &#34;&#34;):
        return redirect(url_for(&#34;list&#34;))
    else:
            if id &gt; 0 and id &lt;= jen_api.get_project_count(db):
                chosen_project = jen_api.get_project(db, id)
                return render_template(&#39;project_page.html&#39;, title=chosen_project[&#39;project_name&#39;], project=chosen_project)
            else:
                return render_template(&#39;404.html&#39;, project_id=id), 404


# /techniques
@app.route(&#39;/techniques&#39;, methods=[&#39;GET&#39;, &#39;POST&#39;])
@app.route(&#39;/techniques/&#39;, methods=[&#39;GET&#39;, &#39;POST&#39;])
def techniques():
    &#34;&#34;&#34;Techniques page. Shows projects pased on techniques used.&#34;&#34;&#34;
    if request.args.get(&#34;search projects&#34;, &#34;&#34;):
        return redirect(url_for(&#34;list&#34;))
    else:
        techniques = request.args.getlist(&#34;technique&#34;)
        found = jen_api.search(db, techniques=techniques)
        return render_template(&#39;techniques.html&#39;, title=&#39;Techniques&#39;, techniques=jen_api.get_techniques(db), search_results=found)

# /404
@app.errorhandler(404)
def not_found_error(error):
    &#34;&#34;&#34;404 Page. Shows if page no found.&#34;&#34;&#34;
    if request.args.get(&#34;search projects&#34;, &#34;&#34;):
        return redirect(url_for(&#34;list&#34;))
    else:
        return render_template(&#39;404.html&#39;), 404

# ERROR SOLUTIONS:

# invalid json: [Errno 2] No such file or directory: data.json
# Solution: Terminal position and flask app has to be run (flask run) from the same folder where the data.json folder is located. The api file needs to be in the same folder as the portfolio_app.py for some reason? It can&#39;t be in the same folder as the __init__ file at least. At the moment of this writing the ONLY folder &#34;flask run&#34; can be run from is: tdp003/portfolio_app/

# Kill app with Ctrl c otherwise risk for error below:
# Solution Error [errno 98] address already in use flask
# ps -fA | grep python
# kill -9 [pid]</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="portfolio_app.routes.home"><code class="name flex">
<span>def <span class="ident">home</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"><p>Homepage. Contains info on author.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@app.route(&#39;/&#39;)
@app.route(&#39;/home&#39;)
@app.route(&#39;/home/&#39;)
def home():
    &#34;&#34;&#34;Homepage. Contains info on author.&#34;&#34;&#34;
    if request.args.get(&#34;search projects&#34;, &#34;&#34;):
        return redirect(url_for(&#34;list&#34;))
    else:
        user = {&#39;username&#39;: &#39;jenoh242 &amp; danhu849&#39;}
        return render_template(&#39;index.html&#39;, user=user)</code></pre>
</details>
</dd>
<dt id="portfolio_app.routes.list"><code class="name flex">
<span>def <span class="ident">list</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"><p>List of projects, with advanced search.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@app.route(&#39;/list&#39;)
@app.route(&#39;/list/&#39;)
def list():
    &#34;&#34;&#34;List of projects, with advanced search.&#34;&#34;&#34;
    search_for = request.args.get(&#34;search projects&#34;, &#34;&#34;)
    search_fields = request.args.getlist(&#34;search_field&#34;)
    if not search_fields:
        search_fields = None
    sort_by = request.args.get(&#34;sort_by&#34;, &#34;&#34;)
    if not sort_by:
        sort_by = &#34;start_date&#34;
    sort_order = request.args.get(&#34;sort_order&#34;, &#34;&#34;)
    if not sort_order:
        sort_order = &#34;desc&#34;
    found = jen_api.search(db, search=search_for, sort_by=sort_by,
                           sort_order=sort_order, search_fields=search_fields)
    #print(&#34;This is found: &#34;, found)
    return render_template(&#39;list.html&#39;, title=&#39;Search&#39;, search=search_for, search_results=found, search_fields=jen_api.get_search_fields(db), searched_search_fields=search_fields)</code></pre>
</details>
</dd>
<dt id="portfolio_app.routes.not_found_error"><code class="name flex">
<span>def <span class="ident">not_found_error</span></span>(<span>error)</span>
</code></dt>
<dd>
<div class="desc"><p>404 Page. Shows if page no found.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@app.errorhandler(404)
def not_found_error(error):
    &#34;&#34;&#34;404 Page. Shows if page no found.&#34;&#34;&#34;
    if request.args.get(&#34;search projects&#34;, &#34;&#34;):
        return redirect(url_for(&#34;list&#34;))
    else:
        return render_template(&#39;404.html&#39;), 404</code></pre>
</details>
</dd>
<dt id="portfolio_app.routes.show_project"><code class="name flex">
<span>def <span class="ident">show_project</span></span>(<span>id)</span>
</code></dt>
<dd>
<div class="desc"><p>Projectpage. Shows info on project.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@app.route(&#39;/project/&lt;int:id&gt;&#39;, methods=[&#39;GET&#39;])
@app.route(&#39;/project/&lt;int:id&gt;/&#39;, methods=[&#39;GET&#39;])
def show_project(id):
    &#34;&#34;&#34;Projectpage. Shows info on project.&#34;&#34;&#34;
    if request.args.get(&#34;search projects&#34;, &#34;&#34;):
        return redirect(url_for(&#34;list&#34;))
    else:
            if id &gt; 0 and id &lt;= jen_api.get_project_count(db):
                chosen_project = jen_api.get_project(db, id)
                return render_template(&#39;project_page.html&#39;, title=chosen_project[&#39;project_name&#39;], project=chosen_project)
            else:
                return render_template(&#39;404.html&#39;, project_id=id), 404</code></pre>
</details>
</dd>
<dt id="portfolio_app.routes.techniques"><code class="name flex">
<span>def <span class="ident">techniques</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"><p>Techniques page. Shows projects pased on techniques used.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@app.route(&#39;/techniques&#39;, methods=[&#39;GET&#39;, &#39;POST&#39;])
@app.route(&#39;/techniques/&#39;, methods=[&#39;GET&#39;, &#39;POST&#39;])
def techniques():
    &#34;&#34;&#34;Techniques page. Shows projects pased on techniques used.&#34;&#34;&#34;
    if request.args.get(&#34;search projects&#34;, &#34;&#34;):
        return redirect(url_for(&#34;list&#34;))
    else:
        techniques = request.args.getlist(&#34;technique&#34;)
        found = jen_api.search(db, techniques=techniques)
        return render_template(&#39;techniques.html&#39;, title=&#39;Techniques&#39;, techniques=jen_api.get_techniques(db), search_results=found)</code></pre>
</details>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="portfolio_app" href="index.html">portfolio_app</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="portfolio_app.routes.home" href="#portfolio_app.routes.home">home</a></code></li>
<li><code><a title="portfolio_app.routes.list" href="#portfolio_app.routes.list">list</a></code></li>
<li><code><a title="portfolio_app.routes.not_found_error" href="#portfolio_app.routes.not_found_error">not_found_error</a></code></li>
<li><code><a title="portfolio_app.routes.show_project" href="#portfolio_app.routes.show_project">show_project</a></code></li>
<li><code><a title="portfolio_app.routes.techniques" href="#portfolio_app.routes.techniques">techniques</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.1</a>.</p>
</footer>
</body>
</html>