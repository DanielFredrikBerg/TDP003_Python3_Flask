\documentclass{TDP003mall}
\usepackage[utf8]{inputenc}
\usepackage[swedish]{babel}
\usepackage{graphicx}

%Bra med information om vilka förutsättningar som gäller. Blir lite fel att säga att pip3 och Emacs behöver vara installerade för att komma åt, använda och underhålla portföljen. Godtycklig editor behövs, men pip3 behövs bara som följd för att installera Flask och Jinja.

%Bra med en virtuell miljö för flask och jinja. Skulle specifik version krävas är det passande att skriva med i manualen, och då koppla det till miljön.

%Bra med bilder nära instruktionerna så man enkelt ser att det blir rätt.

%Saknar felhantering och information om vad man kan göra om en installation inte går igenom.

%Uppgiften är väl godkänd.

\newcommand{\version}{Version 1.3}
\author{Daniel Huber, \url{danhu849@liu.se}\\
  Jens Öhnell, \url{jenoh242@liu.se}}
\title{Installationsmanual}
\date{2020-09-17}
\rhead{Daniel Huber\\
Jens Öhnell}

\begin{document}
\projectpage
\section{Revisionshistorik}
\begin{table}[!h]
\begin{tabularx}{\linewidth}{|l|X|l|}
\hline
Ver. & Revisionsbeskrivning & Datum \\\hline
1.3 & Reviderat dokumentet efter feedback & 20200921 \\\hline
1.2 & Korrigerat upplägget samt bildernas position & 200917 \\\hline
1.1 & Adderat bilder till dokumentet. & 200915 \\\hline
1.0 & Installationsmanual för TDP003 & 200914 \\\hline
\end{tabularx}
\end{table}

\section{Förutsättningar}
Denna manual förutsätter att en Linux distribution är det valda operativsystemet och utgår ifrån Ubuntu 20.04. Det förutsätts också att användaren förstår att ENTER ska tryckas ned efter varje kommando skrivits in i terminalen. Kommandon är markerade i texten med \texttt{fetstil}.

\section{Vad behövs?}
För att få att kunna komma åt, använda och underhålla portföljen behövs följande programvaror installerade:
\begin{itemize}
  \item Python3
  \item pip3
  \item Emacs
  \item Git
  \item Flask
  \item Jinja2   
  \end{itemize}

Flask och Jinja2 kommer installeras i en virtuell pythonmiljö. Mer om det under respektive stycke.

\section{Installation}
Öppna en terminal med \emph{Ctrl Alt T} och uppdatera och uppgradera systemet till de senaste programvaruuppdateringarna. I terminalfönstret skriv:

\texttt{sudo apt update \&\& sudo apt upgrade}

Skriv in användarlösenordet vid behov och vänta på att systemet uppdateras.

\begin{figure}[h]
  \centerline{\includegraphics[width=8cm]{/home/danhu849/Pictures/update_and_upgrade.png}}
  \caption{Uppdatera och uppgradera alltid innan installation.}
  \label{fig}
\end{figure}

\subsection{Emacs eller annan editor}
Om det redan finns preferenser gällande editor att skriva i installeras den på egen hand. Annars är emacs en väldigt bra och open-source editor att använda. Tyvärr får det ej i denna installationsmanual plats att lära sig hur emacs används, men det finns gott om resurser online och en tutorial att följa i själva editorn.

Installera emacs:

\texttt{sudo apt-get install emacs}

Skriv in lösenord vid behov. Kontrollera att emacs installerades:

\texttt{emacs \texttt{-{}-}version}

\begin{figure}[h]
  \centerline{\includegraphics[width=8cm]{/home/danhu849/Pictures/emacs_version.png}}
  \caption{Visar versionen av emacs på systemet.}
  \label{fig}
\end{figure}

\subsection{Git}
Kontrollera att git är installerat:

\texttt{git \texttt{-{}-}version}

Om git inte är installerat, installera git nu:

\texttt{sudo apt-get install git}

Vänta tills installationen är klar och kolla versionen av git:

\texttt{git \texttt{-{}-}version}

\begin{figure}[h]
  \centerline{\includegraphics[width=8cm]{/home/danhu849/Pictures/git-V_install.png}}
  \caption{Visar versionen av git på systemet.}
  \label{fig}
\end{figure}

\subsection{Python3 och pip3}
Python3 ska vara förinstallerat på Ubuntu 20.04. Kontrollera med:

\texttt{python3 -V}

Och:

\texttt{pip3 \texttt{-{}-}version}

Är python3 och pip3 installerade kommer det upp vilket version som finns installerad enligt bild nedan.

\begin{figure}[h]
  \centerline{\includegraphics[width=8cm]{/home/danhu849/Pictures/python3_and_pip3_check.png}}
  \caption{Visar versionen av Python3 och pip3 på systemet.}
  \label{fig}
\end{figure}

Ifall python3 eller pip3 \textbf{INTE} är installerade, installera dessa nu:

\texttt{sudo apt-get install python3.8 python3-pip}

\begin{figure}[h]
  \centerline{\includegraphics[width=8cm]{/home/danhu849/Pictures/install-Python3.png}}
  \caption{Installera Python3 via terminalen.}
  \label{fig}
\end{figure}

Vänta tills installationen är klar och kolla sedan att Python3 och pip3 blev installerade korrekt genom att skriva in versionskommandona precis som innan.

\subsection{Installera flask och jinja2 med pip3 i virtuell miljö}
pip3 är paketinstalleraren för python3 och olika paket adderar olika funktionalitet. Ett problem som kan uppstå är när olika paket inte fungerar med varandra. För att undvika att något sådant uppstår kommer det först upprättas en virtuell python miljö där paketen sedan installeras. Fördelen med detta är att den virtuella python miljön är avskild den huvudsakliga pythonmiljön på hårddisken. Paket som installeras virtuellt kommer inte kunna komma i konflikt med de paket vi installerar i vår huvudsakliga installation.

Öppna en terminal om denna inte redan är öppen och gå in i den katalogen där portfolion ska underhållas. Skapa möjligheten att aktivera en virtuell miljö i nuvarande mapp med:

\texttt{python3 -m venv venv}

Detta skapar en katalog ''venv'' där alla pip3 relaterade paket sen kommer installeras. 

\begin{figure}[h]
  \centerline{\includegraphics[width=8cm]{/home/danhu849/Pictures/create_venv_catalog.png}}
  \caption{Skapa en venv katalog i katalogen för portfolion.}
  \label{fig}
\end{figure}

Aktivera sedan den virtuella miljön:

\texttt{. venv/bin/activate}

Innan dit användarnamn i terminalen står det nu (venv) vilket betyder att vi nu är i en virtuell miljö och kan installera pythonpaket med pip3 utan problem.

Installera först flask: \texttt{pip3 install flask}

Installera sedan jinja2: \texttt{pip3 install Jinja2}

Kontrollera att de båda installerades:

\texttt{pip3 show flask}

Se om Location innehåller \path{/den_nuvarande_mappen/venv} och kontrollera sedan samma för jinja2:

\texttt{pip3 show jinja2}

Vid behov, deaktivera den virtuella miljön genom:

\texttt{deactivate}

Notera att (venv) som fanns innan framför användarnamnet i terminalfönstret nu har försvunnit.

\begin{figure}[h]
  \centerline{\includegraphics[width=8cm]{/home/danhu849/Pictures/flask_jinja2_install_in_venv.png}}
  \caption{Aktivera/deaktivera en virtuell miljö och installera paket.}
  \label{fig}
\end{figure}

Miljön för att göra och underhålla sin egen portfolio är nu skapad. Det går alldeles utmärkt att push:a upp katalogen som portfolioprojektet ligger i till ett git-repo.


\section{Felsökning och Underhåll}
Portfolions projekt sparas i en JSON-fil. Vid behov att manipulera denna data går det antingen att göra det manuellt i en editor eller genom att använda ett API skrivet i Python3 vars specifikation går att läsa sig till i det separata dokumentet: \emph{Systemspecifikation av portfoliosystemet}.


\end{document}
